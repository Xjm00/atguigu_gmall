package com.atguigu.gmall.text;import org.apache.activemq.ActiveMQConnection;import org.apache.activemq.ActiveMQConnectionFactory;import javax.jms.*;/** * @ClassName ActiveTest * @Author 19680 * @Date 2020/2/16 20:59 * @Version 1.0 * @Description TODO **/public class ActiveTest {    public static void main(String[] args) {            ActiveMQConnectionFactory factory = new ActiveMQConnectionFactory(ActiveMQConnection.DEFAULT_USER, ActiveMQConnection.DEFAULT_PASSWORD, "tcp://localhost:61616");            try {                Connection connection = factory.createConnection();                connection.setClientID("2");                connection.start();                Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);                Queue queue = session.createQueue("PAY_SUCCESS_QUEUE");                MessageConsumer consumer = session.createConsumer(queue); // 非持久化                consumer.setMessageListener(new MessageListener() {                    @Override                    public void onMessage(Message message) {                        try {                            if (message instanceof MapMessage) {                                short out_trade_no = ((MapMessage) message).getShort("out_trade_no");                                System.err.println(out_trade_no);                            }                            if (message instanceof TextMessage) {                                String text = ((TextMessage) message).getText();                                System.err.println(text);                            }                        } catch (JMSException e) {                            e.printStackTrace();                        }                    }                });            } catch (JMSException e) {                e.printStackTrace();            }        }}